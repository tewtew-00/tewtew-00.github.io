_includes/anchor_headings.html

#### 기능 
각 제목을 링크 가능한 목적지로 만들어주는 기능
(해당 링크를 복사하면 링크를 공유했을 때 글의 바로 그 위치로 이동해올 수 있음)

#### 기능(심화)

마크다운으로 작성된 HTML 콘텐츠의 모든 제목(h1-h6)에 자동으로 앵커 링크를 추가해주는 Jekyll 플러그인. 

#### 전체 구조 이해 

Jekyll의 Liquid 템플릿 언어로 작성됨 
Jekyll은 정적 사이트 생성기 
Liquid는 템플릿 엔진
    템플릿 = 빈칸이 있는 양식 
    엔진 = 무언가를 동작시키는 핵심 부품(연료)
    -> 템플릿 1개 + 데이터만 바꿔서 무한대 페이지 생성!
-> 템플릿 엔진 = 템플릿 + 데이터를 합쳐서 완성된 HTML을 만들어주는 프로그램 

##### Liquid 템플릿 엔진 예시 

**기본 문법**
변수 출력 
```liquid
    안녕하세요 {{ user.name }}님!
    오늘은 {{ today }}입니다. 
```

조건문
```liquid
    {% if user. age >= 20 %}
        성인입니다. 
    {% else %}
        미성년자입니다. 
    {% endif %}

반복문 
```liquid
    <ul>
    {% for item in shopping_list %}
        <li>{{ item }}</li>
    {% endfor %}
    </ul>

**실제 변환 과정**

1단계: 템플릿 작성 
```liquid
    <h1>{{ site.title }}</h1>
    <p>작성자: {{ author }}</p>
    {% if posts.size > 0 %}
        <ul>
        {% for post in posts %}
            <li><a href="{{ post.url }}"</li>
        {% endfor %}
        </ul>
    {% endif %}
```

2단계: 데이터 준비 
```yaml
    site: 
        title: "내 블로그"
    author: "김철수"
    posts: 
        - title: "첫 번째 글"
          url: "/post1"
        - title: "두 번째 글"
          url: "/post2"
```
        
3단계: 엔진이 변환(자동)
```html
<h1>내 블로그</h1>
<p>작성자: 김철수</p>
<ul>
    <li><a href="/post1"></a></li>
    <li><a href="/post2"></a></li>
</ul>
```

##### 앵커 헤딩 코드 완전 분석 

{% capture headingsWorkspace %} #
 변수에 여러 줄의 내용을 저장하기 시작 
  {% comment %} # 주석 블록 
    Version 1.0.4
      https://github.com/allejo/jekyll-anchor-headings
    "Be the pull request you wish to see in the world." ~Ben Balter
    Usage:
      {% include anchor_headings.html html=content %}
    Parameters:
      * html          (string) - the HTML of compiled markdown generated by kramdown in Jekyll
    Optional Parameters:
      * beforeHeading (bool)   : false  - Set to true if the anchor should be placed _before_ the heading's content
      * anchorAttrs   (string) :  ''    - Any custom HTML attributes that will be added to the `<a>` tag; you may NOT use `href`, `class` or `title`
      * anchorBody    (string) :  ''    - The content that will be placed inside the anchor; the `%heading%` placeholder is available
      * anchorClass   (string) :  ''    - The class(es) that will be used for each anchor. Separate multiple classes with a space
      * anchorTitle   (string) :  ''    - The `title` attribute that will be used for anchors
      * h_min         (int)    :  1     - The minimum header level to build an anchor for; any header lower than this value will be ignored
      * h_max         (int)    :  6     - The maximum header level to build an anchor for; any header greater than this value will be ignored
      * bodyPrefix    (string) :  ''    - Anything that should be inserted inside of the heading tag _before_ its anchor and content
      * bodySuffix    (string) :  ''    - Anything that should be inserted inside of the heading tag _after_ its anchor and content
    Output:
      The original HTML with the addition of anchors inside of all of the h1-h6 headings.
  {% endcomment %}

  {% assign minHeader = include.h_min | default: 1 %}
  {% assign maxHeader = include.h_max | default: 6 %}
  {% assign beforeHeading = include.beforeHeading %}
  {% assign nodes = include.html | split: '<h' %}

  {% capture edited_headings %}{% endcapture %}

  {% for _node in nodes %}
    {% capture node %}{{ _node | strip }}{% endcapture %}

    {% if node == "" %}
      {% continue %}
    {% endif %}

    {% assign nextChar = node | replace: '"', '' | strip | slice: 0, 1 %}
    {% assign headerLevel = nextChar | times: 1 %}

    <!-- If the level is cast to 0, it means it's not a h1-h6 tag, so let's try to fix it -->
    {% if headerLevel == 0 %}
      {% if nextChar != '<' and nextChar != '' %}
        {% capture node %}<h{{ node }}{% endcapture %}
      {% endif %}

      {% capture edited_headings %}{{ edited_headings }}{{ node }}{% endcapture %}
      {% continue %}
    {% endif %}

    {% assign _workspace = node | split: '</h' %}
    {% assign _idWorkspace = _workspace[0] | split: 'id="' %}
    {% assign _idWorkspace = _idWorkspace[1] | split: '"' %}
    {% assign html_id = _idWorkspace[0] %}

    {% capture _hAttrToStrip %}{{ _workspace[0] | split: '>' | first }}>{% endcapture %}
    {% assign header = _workspace[0] | replace: _hAttrToStrip, '' %}

    <!-- Build the anchor to inject for our heading -->
    {% capture anchor %}{% endcapture %}

    {% if html_id and headerLevel >= minHeader and headerLevel <= maxHeader %}
      {% capture anchor %}href="#{{ html_id }}"{% endcapture %}

      {% if include.anchorClass %}
        {% capture anchor %}{{ anchor }} class="{{ include.anchorClass }}"{% endcapture %}
      {% endif %}

      {% if include.anchorTitle %}
        {% capture anchor %}{{ anchor }} title="{{ include.anchorTitle | replace: '%heading%', header }}"{% endcapture %}
      {% endif %}

      {% if include.anchorAttrs %}
        {% capture anchor %}{{ anchor }} {{ include.anchorAttrs }}{% endcapture %}
      {% endif %}

      {% capture anchor %}<a {{ anchor }}>{{ include.anchorBody | replace: '%heading%', header | default: '' }}</a>{% endcapture %}

      <!-- In order to prevent adding extra space after a heading, we'll let the 'anchor' value contain it -->
      {% if beforeHeading %}
        {% capture anchor %}{{ anchor }} {% endcapture %}
      {% else %}
        {% capture anchor %} {{ anchor }}{% endcapture %}
      {% endif %}
    {% endif %}

    {% capture new_heading %}
      <h{{ _hAttrToStrip }}
        {{ include.bodyPrefix }}
        {% if beforeHeading %}
          {{ anchor }}{{ header }}
        {% else %}
          {{ header }}{{ anchor }}
        {% endif %}
        {{ include.bodySuffix }}
      </h{{ _workspace | last }}
    {% endcapture %}
    {% capture edited_headings %}{{ edited_headings }}{{ new_heading }}{% endcapture %}
  {% endfor %}
{% endcapture %}{% assign headingsWorkspace = '' %}{{ edited_headings | strip }}